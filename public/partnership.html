<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Partnership — Somali Eye Health Alliance</title>
  <link rel="stylesheet" href="style.css">

  <script>
document.addEventListener('DOMContentLoaded', () => {
  // 1) Keep your current "active" detection but update to also add 'active' class for styling
  const current = window.location.pathname.split("/").pop() || 'index.html';
  document.querySelectorAll(".main-nav a").forEach(a => {
    const href = a.getAttribute("href");
    if (href === current || (href === 'index.html' && current === '')) {
      a.classList.add("active");
    } else {
      a.classList.remove("active");
    }
  });

  // 2) Mobile menu toggle
  const hambBtn = document.getElementById('hambBtn');
  const mobileMenu = document.getElementById('mobileMenu');
  if (hambBtn && mobileMenu) {
    hambBtn.addEventListener('click', () => {
      const open = hambBtn.getAttribute('aria-expanded') === 'true';
      hambBtn.setAttribute('aria-expanded', String(!open));
      mobileMenu.setAttribute('aria-hidden', String(open));
      if (!open) {
        mobileMenu.style.display = 'block';
        // populate mobile menu if empty (clone)
        if (!mobileMenu.innerHTML.trim()) {
          const clone = document.querySelector('.main-nav .nav-list').cloneNode(true);
          // simplify clone for mobile (remove desktop-only popovers)
          clone.querySelectorAll('.nav-subtitle').forEach(n => n.remove());
          mobileMenu.appendChild(clone);
        }
      } else {
        mobileMenu.style.display = 'none';
      }
      hambBtn.focus();
    });
    // close mobile menu when clicking outside
    document.addEventListener('click', (e) => {
      if (!mobileMenu.contains(e.target) && !hambBtn.contains(e.target)) {
        hambBtn.setAttribute('aria-expanded','false');
        mobileMenu.setAttribute('aria-hidden','true');
        mobileMenu.style.display = 'none';
      }
    });
  }

  // 3) Move focusable state to show current nav for keyboard users
  document.querySelectorAll('.nav-list a').forEach(a => {
    a.addEventListener('focus', () => {
      a.classList.add('focus-visible');
    });
    a.addEventListener('blur', () => {
      a.classList.remove('focus-visible');
    });
  });

  // 4) optional: ensure donate sits flush at right visually by making header-inner full width
  // (handled in CSS - nothing to do here)
});

    </script>
    
  <!-- START: Back-to-top small styles (optional: move into style.css) -->
  <style>
    /* Floating "back to top" button */
    .seha-back-to-top {
      position: fixed;
      right: 20px;
      bottom: 24px;
      width: 48px;
      height: 48px;
      border-radius: 12px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: var(--primary);
      color: #fff;
      box-shadow: 0 10px 30px rgba(2,6,23,0.12);
      cursor: pointer;
      z-index: 1600;
      opacity: 0;
      pointer-events: none;
      transform: translateY(8px);
      transition: opacity .18s ease, transform .18s ease;
      border: 0;
    }

    .seha-back-to-top.show {
      opacity: 1;
      pointer-events: auto;
      transform: translateY(0);
    }

    /* focus / keyboard visibility */
    .seha-back-to-top:focus {
      outline: 3px solid rgba(45,212,191,0.22);
      outline-offset: 4px;
    }

    /* inner svg */
    .seha-back-to-top svg { width: 20px; height: 20px; display:block; }

    /* small responsive tweak so it doesn't overlap on very small screens */
    @media (max-width: 420px) {
      .seha-back-to-top { right: 12px; bottom: 16px; width:44px; height:44px; border-radius:10px; }
    }

    /* optional: hide if user prefers reduced motion */
    @media (prefers-reduced-motion: reduce) {
      .seha-back-to-top { transition: none; }
      html { scroll-behavior: auto; }
    }
    /* === Small/tight desktop header patch — only layout + sizing === */
/* Apply only on desktop so mobile/menu/toggles are untouched */
@media (min-width: 981px) {

/* tighten header row and flush container edges */
.site-header { padding: 0; }
.container.header-inner { padding: 0 6px; max-width: var(--container); }

/* reduce overall header height and gaps */
.header-inner {
  height: 52px;            /* slightly shorter */
  gap: 8px;
  padding: 0;
  align-items: center;
}

/* branding: smaller logo and reduced text sizes */
.brand { gap: 8px; min-width: 0; }
.brand .logo { width: 34px; height: 34px; border-radius: 6px; }
.brand-text .org-name {
  font-size: 11px;         /* smaller title */
  font-weight: 700;
  line-height: 1;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.brand-text .tagline {
  font-size: 10px;         /* smaller tagline */
  margin: 0;
  opacity: 0.9;
}

/* navigation: smaller font, tighter padding and smaller gap */
.main-nav { flex: 1 1 auto; min-width: 0; }
.main-nav .nav-list {
  gap: 6px;                /* tighter gap between menu items */
  padding: 0 6px;
}
.main-nav a {
  font-size: 12px;         /* smaller nav text */
  padding: 6px 8px;        /* tighter clickable area */
  border-radius: 6px;
  font-weight: 700;
}

/* reduce the hover transform so it looks subtle on small header */
.main-nav a:hover, .main-nav a:focus {
  transform: translateY(-1px);
  background: rgba(15,118,110,0.04);
}

/* ensure desktop popovers still position correctly (no clipping) */
.nav-item { position: relative; }
.nav-subtitle {
  left: 50%;
  transform: translateX(-50%) translateY(6px);
  top: calc(100% + 6px);
  min-width: 180px;
  z-index: 2500;
}
}

/* Keep mobile rules exactly as before (no changes) */
@media (max-width: 980px) {
/* nothing here — mobile behavior unchanged */
}

/* === ACTIVE NAVIGATION HIGHLIGHT === */
@media (min-width: 981px) {
  .main-nav a.active {
    background: var(--primary-light, rgba(15,118,110,0.10));
    color: var(--primary, #0f766e);
    transform: none;       /* don't move up when active */
  }

  /* optional: keep hover consistent */
  .main-nav a.active:hover {
    background: var(--primary-light, rgba(15,118,110,0.12));
    color: var(--primary, #0f766e);
  }
}

/* ---------- Header: polished responsive layout ---------- */
/* Variables (tweak to taste) */
:root {
  --header-height: 72px;            /* desktop height (can tune) */
  --header-padding-x: 2px;
  --brand-gap: 12px;
  --logo-size: 44px;
  --nav-gap: 3px;
  --nav-font-size: 12.5px;
  --donate-bg: #0f766e;
  --donate-hover: #0b5f58;
  --accent: #2dd4bf;
  --accent-2: #16a085;
  --text-on-primary: #ffffff;
  --container: 1300px;
}

/* header base */
.site-header {
  position: sticky;
  top: 0;
  z-index: 140;
  background: rgba(255,255,255,0.95);
  backdrop-filter: blur(6px);
  box-shadow: 0 1px 0 rgba(2,6,23,0.04);
}

/* use a dedicated header-inner container to control layout */
.container.header-inner {
  max-width: var(--container);
  padding: 0 var(--header-padding-x);
  margin: 0 auto;
  display: flex;
  align-items: center;
  height: var(--header-height);
  gap: 12px;
  box-sizing: border-box;
}

/* brand (left) */
.brand {
  display: flex;
  align-items: center;
  gap: var(--brand-gap);
  flex: 0 0 auto;
  min-width: 0;
}
.brand .logo {
  width: var(--logo-size);
  height: var(--logo-size);
  object-fit: contain;
  border-radius: 8px;
  display: block;
}
.brand-text .org-name {
  margin: 0;
  font-weight: 800;
  font-size: 14px;
  line-height: 1;
  color: #0b2571;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.brand-text .tagline {
  margin: 0;
  font-size: 13px;
  color: #3f4b56;
  opacity: 0.95;
}

/* nav (center) */
.main-nav {
  flex: 1 1 auto;               /* takes available space between brand and cta */
  display: flex;
  justify-content: center;      /* center the menu */
  min-width: 0;
}
.nav-list {
  display: flex;
  gap: var(--nav-gap);
  align-items: center;
  list-style: none;
  margin: 0;
  padding: 0;
}
.nav-list .nav-item { position: relative; }
.main-nav a {
  display: inline-block;
  padding: 1px 8px;
  font-weight: 700;
  font-size: var(--nav-font-size);
  color: #0b1220;
  text-decoration: none;
  border-radius: 8px;
  transition: transform .12s ease, background .12s ease, color .12s ease, box-shadow .18s ease;
  white-space: nowrap;
}

/* subtle hover — micro-lift */
.main-nav a:hover,
.main-nav a:focus {
  transform: translateY(-2px);
  background: rgba(15,118,110,0.04);
  outline: none;
}

/* donate + cta area (right) */
.header-cta {
  flex: 0 0 auto;
  display: flex;
  align-items: center;
  gap:12px;
  margin-left: -20px;
}

/* Donate button flush to right edge visually (container controls edges) */
.btn.donate {
  --pad-x: 14px;
  --pad-y: 8px;
  background: var(--donate-bg);
  color: var(--text-on-primary);
  padding: var(--pad-y) var(--pad-x);
  border-radius: 10px;
  font-weight: 800;
  box-shadow: 0 8px 24px rgba(15,118,110,0.12);
  text-decoration: none;
  border: 0;
  cursor: pointer;
  transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
}
.btn.donate:hover,
.btn.donate:focus {
  background: var(--donate-hover);
  transform: translateY(-2px);
  box-shadow: 0 14px 36px rgba(11,95,88,0.14);
  outline: none;
}

/* hamburger small control (kept small & hidden desktop) */
.hamb {
  display: none;
  background: transparent;
  border: 0;
  font-size: 20px;
  cursor: pointer;
}

/* selected nav shining treatment */
.main-nav a.active {
  color: var(--accent-2);
  position: relative;
  z-index: 2;
}
/* animated glowing underline / sheen */
.main-nav a.active::after {
  content: "";
  position: absolute;
  left: 6%;
  right: 6%;
  bottom: -6px;
  height: 6px;
  border-radius: 8px;
  background: linear-gradient(90deg, rgba(45,212,191,0) 0%, rgba(45,212,191,0.28) 30%, rgba(255,255,255,0.3) 50%, rgba(45,212,191,0.28) 70%, rgba(45,212,191,0) 100%);
  transform-origin: left center;
  animation: nav-glow 2.8s ease-in-out infinite;
  opacity: 0.95;
}

/* subtle 'shine' keyframes */
@keyframes nav-glow {
  0% { transform: translateX(-30%) scaleX(.6); opacity: .5; }
  40% { transform: translateX(0%) scaleX(1.05); opacity: 1; }
  100% { transform: translateX(30%) scaleX(.6); opacity: .4; }
}

/* dropdown/popover boxes (desktop) */
.nav-subtitle {
  display: none;
  position: absolute;
  top: calc(100% + 10px);
  left: 50%;
  transform: translateX(-50%);
  background: #fff;
  border-radius: 10px;
  box-shadow: 0 14px 40px rgba(2,6,23,0.12);
  padding: 12px;
  min-width: 220px;
  z-index: 120;
}
.nav-item.has-sub:hover > .nav-subtitle,
.nav-item.has-sub:focus-within > .nav-subtitle {
  display: block;
}

/* focus styles for keyboard users */
a:focus, button:focus {
  outline: 3px solid rgba(45,212,191,0.14);
  outline-offset: 4px;
  border-radius: 8px;
}

/* ===== Mobile ===== */
@media (max-width: 980px) {
  :root { --header-height: 64px; }
  .container.header-inner { padding: 0 12px; }
  .brand-text .org-name { font-size: 13px; }
  .brand-text .tagline { display: none; }
  .main-nav { display: none; }         /* hide desktop nav on mobile */
  .hamb { display: inline-flex; }     /* show hamburger */
  .header-cta .btn.donate { padding: 8px 12px; font-size: 14px; } 
  .mobile-menu { display: block; }
}

/* Very large desktop tweak (more airy) */
@media (min-width: 1400px) {
  .brand-text .org-name { font-size: 18px; }
  .brand .logo { width: 52px; height: 52px; }
  .nav-list { gap: 22px; }
}


  </style>
  <!-- END: Back-to-top styles -->
</head>
<body>
 <!-- HEADER -->
<header class="site-header" role="banner">
  
  <!-- small, safe header-local CSS to avoid duplicate arrows & show mobile toggle only on small screens -->
  <style>
    /* If your global CSS also sets .nav-item.has-sub > a::after, override here so we don't get double arrows */
    .nav-item.has-sub > a::after { content: ''; }

    /* mobile-only helper: hide by default (desktop) and show only under your mobile breakpoint */
    .mobile-only { display: none; align-items: center; gap: 8px; }
    @media (max-width: 880px) {
      .mobile-only { display: flex; }
      /* ensure desktop popover remains visible on hover as before */
      .nav-item.has-sub > .nav-subtitle { display: none; }
      .nav-item.has-sub:hover > .nav-subtitle,
      .nav-item.has-sub:focus-within > .nav-subtitle { display: block; }
    }
  </style>

  <div class="container header-inner">
    <div class="brand">
      <img src="images/logo.png" alt="SEHA logo" class="logo" />
      <div class="brand-text">
        <h1 class="org-name">Somali Eye Health Alliance</h1>
        <p class="tagline">Saving sight • Building local capacity</p>
      </div>
    </div>

    <nav class="main-nav" role="navigation" aria-label="Main Navigation">
      <ul class="nav-list">
        <li class="nav-item"><a href="index.html">Home</a></li>

        <li class="nav-item has-sub" id="nav-about">
          <a href="about.html" aria-haspopup="true" aria-expanded="false">About Us ▾</a>

          <!-- desktop popover -->
          <div class="nav-subtitle" role="dialog" aria-hidden="true" aria-labelledby="about-subtitle">
            <ul class="subtitle-list">
              <li><a href="about.html#who" class="subtitle-link">Who we are</a></li>
              <li><a href="about.html#what-we-do" class="subtitle-link">What we do</a></li>
              <li><a href="about.html#framework" class="subtitle-link">Operational framework</a></li>
              <li><a href="about.html#team" class="subtitle-link">Our team & governance</a></li>
            </ul>
          </div>

          <!-- mobile submenu (kept for hamburger) -->
          <ul class="sub" aria-label="About submenu">
            <li><a href="about.html#who">Who we are</a></li>
            <li><a href="about.html#what-we-do">What we do</a></li>
            <li><a href="about.html#framework">Operational framework</a></li>
            <li><a href="about.html#team">Our team & governance</a></li>
          </ul>
        </li>

        <li class="nav-item has-sub" id="nav-ourwork">
          <a href="our-work.html" aria-haspopup="true" aria-expanded="false">Our Work ▾</a>

          <div class="nav-subtitle" role="dialog" aria-hidden="true" aria-labelledby="ourwork-subtitle">
            <ul class="subtitle-list">
              <li><a href="programs.html" class="subtitle-link">Core programs</a></li>
              <li><a href="our-work.html#consortia" class="subtitle-link">Clinical consortia</a></li>
              <li><a href="our-work.html#regions" class="subtitle-link">Regional activity</a></li>
              <li><a href="our-work.html#impact" class="subtitle-link">Impact & results</a></li>
            </ul>
          </div>

          <ul class="sub" aria-label="Our Work submenu">
            <li><a href="programs.html">Programs</a></li>
            <li><a href="our-work.html#consortia">Consortia</a></li>
            <li><a href="our-work.html#regions">Regions</a></li>
          </ul>
        </li>

        <li class="nav-item"><a href="programs.html">Programs</a></li>
        <li class="nav-item"><a href="membership.html">Membership</a></li>
        <!-- <li class="nav-item"><a href="partnership.html">Partnership</a></li> -->

        <li class="nav-item"><a href="resources.html">Resources</a></li>
        <li class="nav-item"><a href="events.html">Events & Blogs</a></li>
        <li class="nav-item"><a href="opportunities.html">Opportunities</a></li>
        <li class="nav-item"><a href="awareness.html">Awareness</a></li>
        <li class="nav-item"><a href="contact.html">Contact</a></li>

        <!-- SETTINGS (single desktop link + mobile-only toggle + mobile submenu)
             - Desktop: user sees the "Settings" anchor and the .nav-subtitle popover on hover/focus
             - Mobile: the .mobile-only toggle (plus symbol) is shown and toggles the submenu;
               the mobile-only element is hidden on desktop so you do not get two visible "Settings" -->
        <li class="nav-item has-sub" id="nav-settings">
          <!-- Desktop link (visible on all widths) -->
          <!-- <a href="settings.html" aria-haspopup="true" aria-expanded="false" id="settingsDesktopLink">Settings ▾</a> -->
          <a href="settings.html" aria-haspopup="true" aria-expanded="false">Settings ▾</a>


          <!-- desktop popover -->
          <div class="nav-subtitle" role="dialog" aria-hidden="true" aria-labelledby="settings-subtitle">
            <ul class="subtitle-list">
              <li><a href="settings.html#account">Account settings</a></li>
              <li><a href="settings.html#privacy">Privacy & security</a></li>
              <li><a href="settings.html#appearance">Appearance</a></li>
            </ul>
          </div>

          <!-- Mobile-only toggle: hidden on desktop by .mobile-only rule above
          <a href="#" class="mobile-toggle mobile-only" data-target="settingsSub" aria-controls="settingsSub" aria-expanded="false" id="settingsMobileToggle" style="justify-content:space-between;width:100%;padding:6px 0;">
            <span>Settings</span>
            <span class="toggle-symbol" aria-hidden="true">+</span>
          </a> -->

          <!-- mobile submenu -->
          <ul class="sub mobile-sub" id="settingsSub" aria-hidden="true">
            <li><a href="settings.html#account">Account settings</a></li>
            <li><a href="settings.html#privacy">Privacy & security</a></li>
            <li><a href="settings.html#appearance">Appearance</a></li>
          </ul>
        </li>
        <!-- /SETTINGS -->

      </ul>
    </nav>

    <div class="header-cta">
      <a class="btn donate" id="donateBtn" href="donate.html" title="Donate">Donate</a>
      <button class="hamb" id="hambBtn" aria-expanded="false" aria-controls="mobileMenu" aria-label="Open menu">☰</button>
    </div>
  </div>

  <div class="mobile-menu" id="mobileMenu" aria-hidden="true"></div>
</header>



<!-- PARTNERSHIP: Dual-row carousel (mobile 1 / desktop 3 per row) with opposite autoplay and working prev/next controls -->
<section class="partnership-page">
  <div class="container partnership-container">
    <!-- HERO -->
    <header class="partnership-hero card">
      <div class="hero-inner">
        <div>
          <h1>Partnerships  <div class="hero-cta"><a href="contact.html" class="btn primary">Contact us to become a partner</a></div></h1>
          <p class="lead">Somali Eye Health Alliance works with NGOs, donors, institutions and private-sector partners to strengthen eye health services across Somalia.</p>
        </div>
       
      </div>
    </header>

<!-- REPLACE partner-types / partner-benefits / impact-snapshot with this block -->

<!-- PARTNER TYPES + BENEFITS + IMPACT SNAPSHOT (with icons + animated counters) -->
<div class="card partnership-intro">
  <div class="grid-2 intro-grid">
    <div>
      <h2>Why partner with Somali Eye Health Alliance?</h2>
      <p class="muted">
        We bring trusted local leadership, clinical expertise and scalable delivery mechanisms to improve eye health
        outcomes across Somalia. Partnering with SEHA means faster, safer and more sustainable delivery of screening,
        spectacles and cataract surgery — plus local capacity-building so results last.
      </p>
      <ul class="benefits clean">
        <li><strong>Local reach:</strong> Community networks and regional surgical hubs</li>
        <li><strong>Technical expertise:</strong> Clinical training, research and monitoring</li>
        <li><strong>Operational support:</strong> Supply logistics, procurement and equipment maintenance</li>
        <li><strong>Transparency:</strong> Clear reporting, measurable outcomes and accountability</li>
        <li><strong>Scalability:</strong> Proven models that scale from single clinics to regional programmes</li>
      </ul>
    </div>

    <div>
      <h2>How we work with partners</h2>

      <!-- partner types: each ptype has an icon -->
      <div class="partner-types grid-3">
        <div class="ptype card small">
          <div class="ptype-row">
            <div class="ptype-icon" aria-hidden="true">
              <!-- funding icon (stacked coins) -->
              <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img">
                <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="1.5" fill="none"/>
                <rect x="4" y="13" width="16" height="6" rx="2" stroke="currentColor" stroke-width="1.5" fill="none"/>
                <path d="M4 17h16" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/>
              </svg>
            </div>
            <div>
              <h4>Strategic & Funding Partners</h4>
              <p class="muted small">Donors and foundations that fund large-scale programmes, capital projects and long-term capacity building.</p>
            </div>
          </div>
        </div>

        <div class="ptype card small">
          <div class="ptype-row">
            <div class="ptype-icon" aria-hidden="true">
              <!-- implementation icon (hand truck / delivery) -->
              <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img">
                <rect x="3" y="6" width="12" height="10" rx="1" stroke="currentColor" stroke-width="1.5" fill="none"/>
                <circle cx="18" cy="16" r="1.6" stroke="currentColor" stroke-width="1.4" fill="none"/>
                <circle cx="9.5" cy="17.6" r="1.4" stroke="currentColor" stroke-width="1.2" fill="none"/>
                <path d="M15 6l3 4" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/>
              </svg>
            </div>
            <div>
              <h4>Implementation Partners</h4>
              <p class="muted small">Local NGOs, hospitals and outreach teams who deliver screenings, surgeries and follow-up care.</p>
            </div>
          </div>
        </div>

        <div class="ptype card small">
          <div class="ptype-row">
            <div class="ptype-icon" aria-hidden="true">
              <!-- technical/academic icon (book + atom) -->
              <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img">
                <path d="M4 6h10v12H4z" stroke="currentColor" stroke-width="1.5" fill="none"/>
                <path d="M14 8c1 0 3 1 3 3s-2 3-3 3" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" fill="none"/>
                <circle cx="16.5" cy="8.5" r="0.9" fill="currentColor"/>
              </svg>
            </div>
            <div>
              <h4>Technical & Academic Partners</h4>
              <p class="muted small">Universities and clinical partners who provide training, research and quality assurance.</p>
            </div>
          </div>
        </div>
      </div><!-- /.partner-types -->
    </div>
  </div>
</div>

<!-- WHAT PARTNERS GET (benefits with icons) -->
<div class="card partner-benefits">
  <h3>What partners receive</h3>
  <div class="benefit-grid">
    <div class="benefit">
      <div class="benefit-row">
        <div class="benefit-icon" aria-hidden="true">
          <!-- project-plan icon -->
          <svg width="36" height="36" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img">
            <rect x="3" y="4" width="18" height="16" rx="2" stroke="currentColor" stroke-width="1.4" fill="none"/>
            <path d="M7 9h10M7 13h6" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/>
          </svg>
        </div>
        <div>
          <div class="benefit-title">Coordinated Implementation</div>
          <p class="muted small">Local project management, logistics and reporting — we ensure activities run smoothly and on-time.</p>
        </div>
      </div>
    </div>

    <div class="benefit">
      <div class="benefit-row">
        <div class="benefit-icon" aria-hidden="true">
          <!-- analytics icon -->
          <svg width="36" height="36" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img">
            <path d="M4 17h16" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
            <path d="M7 13v4M12 9v8M17 5v12" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
          </svg>
        </div>
        <div>
          <div class="benefit-title">Monitoring & Data</div>
          <p class="muted small">Regular monitoring, outcomes data and learning to measure impact and inform funder reports.</p>
        </div>
      </div>
    </div>

    <div class="benefit">
      <div class="benefit-row">
        <div class="benefit-icon" aria-hidden="true">
          <!-- training icon -->
          <svg width="36" height="36" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img">
            <path d="M12 2l7 4v6c0 5-7 8-7 8s-7-3-7-8V6l7-4z" stroke="currentColor" stroke-width="1.2" fill="none"/>
            <path d="M9 12h6" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/>
          </svg>
        </div>
        <div>
          <div class="benefit-title">Capacity Building</div>
          <p class="muted small">Training, mentorship and CPD for local clinicians and optical technicians to sustain services.</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- IMPACT SNAPSHOT (animated on scroll) -->
<div class="card impact-snapshot" id="impactSnapshot" aria-live="polite">
  <h3>Impact snapshot</h3>
  <div class="snapshot-grid">
    <div class="stat stat-green">
      <div class="stat-num" data-target="12400">0</div>
      <div class="stat-label muted">People screened</div>
    </div>
  
    <div class="stat stat-blue">
      <div class="stat-num" data-target="4200">0</div>
      <div class="stat-label muted">Spectacles provided</div>
    </div>
  
    <div class="stat stat-orange">
      <div class="stat-num" data-target="3100">0</div>
      <div class="stat-label muted">Cataract surgeries</div>
    </div>
  </div>
  
  <p class="muted small" style="margin-top:10px">These figures are illustrative — replace with your real metrics or dynamic values from your dashboard.</p>
</div>

<!-- Styles for icons, layout tweaks, and animated counters -->
<style>
  .stat-green .stat-num { color: #0b5f58; }
.stat-blue .stat-num { color: #2563eb; }
.stat-orange .stat-num { color: #ea580c; }

  .ptype-row, .benefit-row { display:flex; gap:12px; align-items:flex-start; }
  .ptype-icon, .benefit-icon { width:40px; height:40px; display:flex; align-items:center; justify-content:center; color:var(--accent); flex:0 0 40px; }
  .ptype.card.small, .benefit { padding:12px; box-shadow:none; border:1px solid rgba(11,95,88,.03); background:linear-gradient(180deg,#fff,#fcfffd); border-radius:10px; }
  .ptype h4 { margin:0 0 6px 0; font-size:15px; }
  .benefit-grid { display:grid; gap:12px; margin-top:10px; grid-template-columns: 1fr; }
  @media(min-width:720px){ .benefit-grid { grid-template-columns: repeat(3,1fr); } }

  /* snapshot counter styling */
  .impact-snapshot .stat { text-align:center; padding:12px; border-radius:10px; background:linear-gradient(180deg,#fff,#fcfffd); border:1px solid rgba(11,95,88,.03); box-shadow:0 6px 18px rgba(2,6,23,.04); }
  .stat-num { font-size:22px; font-weight:900; color:#07102a; min-height:28px; }
  .stat-label { font-size:13px; margin-top:6px; }
  
  
  /* IMPACT SNAPSHOT LAYOUT */
.snapshot-grid {
  display: grid;
  gap: 16px;
  grid-template-columns: 1fr; /* mobile default: stacked */
}

/* desktop & tablet: one row (3 columns) */
@media (min-width: 768px) {
  .snapshot-grid {
    grid-template-columns: repeat(3, 1fr);
  }
}

</style>

<!-- JavaScript: animate counters on scroll (IntersectionObserver) -->
<script>
  (function(){
    function formatNumber(n){ return n.toLocaleString(); }

    function animateValue(el, target, duration){
      const start = 0;
      const startTime = performance.now();
      function tick(now){
        const elapsed = now - startTime;
        const progress = Math.min(elapsed / duration, 1);
        const value = Math.floor(progress * target);
        el.textContent = formatNumber(value);
        if(progress < 1) requestAnimationFrame(tick);
        else el.textContent = formatNumber(target);
      }
      requestAnimationFrame(tick);
    }

    function runSnapshotAnimation(root){
      const nums = Array.from(root.querySelectorAll('.stat-num')).filter(n => n.dataset && n.dataset.target);
      nums.forEach(el => {
        const target = parseInt(el.dataset.target, 10) || 0;
        const duration = 1200; // ms per number (fast, smooth)
        animateValue(el, target, duration);
      });
    }

    // observe the snapshot card and animate once when visible
    const snapshot = document.getElementById('impactSnapshot');
    if(snapshot){
      const io = new IntersectionObserver((entries, obs) => {
        entries.forEach(entry => {
          if(entry.isIntersecting){
            runSnapshotAnimation(snapshot);
            obs.disconnect(); // only once
          }
        });
      }, { threshold: 0.35 });
      io.observe(snapshot);
    }

    // also: if stats are above the fold (no intersection observer required), run immediately
    if(snapshot && snapshot.getBoundingClientRect().top < window.innerHeight){
      // small timeout to allow layout/paint
      setTimeout(()=> runSnapshotAnimation(snapshot), 100);
    }
  })();
</script>




<!-- END NEW: Partnership explanation sections -->

    <!-- FILTER -->
    <div class="card partners-area">
      <div class="partners-head">
        <div>
          <h2>Our partners</h2>
          <p class="muted">We are proud to work with national and international organisations committed to improving eye health.</p>
        </div>

        <div class="partner-filter" id="partnerFilter" role="toolbar" aria-label="Filter partners">
          <button class="pill active" data-filter="all" aria-pressed="true">All</button>
          <button class="pill" data-filter="ngos">NGOs</button>
          <button class="pill" data-filter="donors">Donors</button>
          <button class="pill" data-filter="government">Government bodies</button>
          <button class="pill" data-filter="universities">Universities</button>
          <button class="pill" data-filter="hospitals">Hospitals</button>
          <button class="pill" data-filter="companies">Companies</button>
          <button class="pill" data-filter="foundations">Foundations</button>
        </div>
      </div>

      <!-- TWO ROWS (stacked) -->
      <div class="partners-layout dual-rows">
        <!-- TOP ROW -->
        <div class="partners-slider row-top" aria-live="polite">
          <button id="topPrev" class="slide-btn top-prev" aria-label="Prev top">‹</button>
          <div class="slides-viewport" id="topViewport" tabindex="0">
            <div class="slides" id="topSlides" aria-hidden="false"></div>
          </div>
          <button id="topNext" class="slide-btn top-next" aria-label="Next top">›</button>
        </div>

        <!-- BOTTOM ROW -->
        <div class="partners-slider row-bottom" aria-live="polite" style="margin-top:14px">
          <button id="bottomPrev" class="slide-btn bottom-prev" aria-label="Prev bottom">‹</button>
          <div class="slides-viewport" id="bottomViewport" tabindex="0">
            <div class="slides" id="bottomSlides" aria-hidden="true"></div>
          </div>
          <button id="bottomNext" class="slide-btn bottom-next" aria-label="Next bottom">›</button>
        </div>
      </div>
    </div>

    <!-- CTA -->
    <section class="cta-box card">
      <h3>Interested in partnering with us?</h3>
      <p>For partnership enquiries please <a href="contact.html">contact us</a> — we welcome funding, technical and implementation collaborations.</p>
    </section>
  </div>

  <!-- CENTERED MODAL -->
  <div class="partner-modal-backdrop" id="partnerModal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="partner-modal" role="document" id="partnerModalPanel">
      <button class="partner-modal-close" id="partnerModalClose" aria-label="Close partner details">✕</button>
      <div class="partner-modal-body" id="partnerModalBody" tabindex="0"></div>
    </div>
  </div>
</section>

<!-- STYLES -->
<style>
:root{
  --accent:#16a085; --accent-2:#2dd4bf; --muted:#475569; --card-radius:12px; --gap:14px;
  --autoplay-ms:2000;
}
.partnership-container{max-width:1300px;margin:28px auto;padding:18px;box-sizing:border-box}
.card{background:#fff;padding:18px;border-radius:var(--card-radius);box-shadow:0 10px 30px rgba(2,6,23,.06);margin-bottom:18px}
.partners-head{display:flex;justify-content:space-between;align-items:flex-start;gap:12px;flex-wrap:wrap}
.partner-filter{display:flex;gap:8px;flex-wrap:wrap;margin-top:6px}
.pill{background:#f3f4f6;border:0;padding:8px 12px;border-radius:999px;font-weight:700;cursor:pointer;box-shadow:0 2px 6px rgba(2,6,23,.03);transition:all .15s}
.pill.active{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#fff;box-shadow:0 10px 30px rgba(16,118,110,.12)}
.pill:focus{outline:3px solid rgba(45,212,191,.14);outline-offset:3px}

/* structure */
.partners-layout.dual-rows{display:block}
.partners-slider{position:relative;display:flex;align-items:center}
.slides-viewport{overflow:hidden;width:100%;border-radius:var(--card-radius);outline:none}
.slides{display:flex;gap:var(--gap);transition:transform .45s cubic-bezier(.2,.9,.23,1);padding:0;will-change:transform}

/* card */
.partner-card{flex:0 0 auto;display:flex;gap:12px;align-items:flex-start;background:linear-gradient(180deg,#fff,#fbfdff);padding:14px;border-radius:12px;border:1px solid rgba(11,95,88,.03);box-shadow:0 6px 18px rgba(2,6,23,.04);min-height:120px;overflow:hidden}
.partner-media{width:120px;height:84px;flex:0 0 120px;display:flex;align-items:center;justify-content:center;border-radius:10px;background:linear-gradient(180deg,#fff,#f7fbfb);overflow:hidden;box-shadow:0 4px 18px rgba(2,6,23,.04),inset 0 1px 0 rgba(255,255,255,.7)}
.partner-media img{width:100%;height:100%;object-fit:cover;display:block;transition:transform .36s,filter .24s}
.partner-card:hover .partner-media img{transform:scale(1.06) translateY(-3px);filter:drop-shadow(0 10px 18px rgba(11,95,88,.08))}
.partner-info{flex:1;display:flex;flex-direction:column;gap:8px}
.partner-name{font-weight:800;color:#07102a;font-size:15px}
.partner-desc{color:var(--muted);font-size:13px;line-height:1.3;margin:0;max-height:56px;overflow:hidden}
.partner-meta{display:flex;align-items:center;justify-content:space-between;margin-top:auto;gap:10px;width:100%}
.partner-badge-small{font-size:12px;background:#eef6f4;padding:6px 10px;border-radius:999px;color:#0b5563;font-weight:700;box-shadow:0 4px 12px rgba(2,6,23,.04)}
.btn-more{border:0;background:var(--accent);color:#fff;font-weight:700;cursor:pointer;padding:8px 12px;border-radius:8px;box-shadow:0 8px 22px rgba(15,118,110,.10);transition:transform .12s}
.btn-more:hover{transform:translateY(-2px)}

/* prev/next buttons */
.slide-btn{position:absolute;top:50%;transform:translateY(-50%);z-index:40;border:0;background:#fff;color:#0f766e;width:44px;height:44px;border-radius:999px;box-shadow:0 8px 28px rgba(2,6,23,.12);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:20px}
.row-top .slide-btn{height:44px}
.row-bottom .slide-btn{height:44px}
.top-prev{left:8px}
.top-next{right:8px}
.bottom-prev{left:8px}
.bottom-next{right:8px}

/* modal */
.partner-modal-backdrop{display:none;position:fixed;inset:0;background:rgba(2,6,23,.46);align-items:center;justify-content:center;z-index:2200;padding:24px}
.partner-modal-backdrop.open{display:flex}
.partner-modal{width:min(980px,96vw);max-height:92vh;overflow:auto;border-radius:12px;background:linear-gradient(180deg,#fff,#fbfdff);box-shadow:0 40px 100px rgba(2,6,23,.36);position:relative;padding:20px}
.partner-modal-close{position:absolute;right:14px;top:14px;border:0;background:#fff;font-size:18px;cursor:pointer;width:44px;height:44px;border-radius:999px;box-shadow:0 8px 28px rgba(2,6,23,.12);display:inline-flex;align-items:center;justify-content:center;color:#0f766e;z-index:60}
.partner-modal-body img{width:100%;max-height:320px;object-fit:cover;border-radius:8px;background:#fff;padding:6px;margin-bottom:12px}
.partner-modal-body h3{margin:0 0 6px 0;font-size:20px;color:#07102a}
.partner-modal-body .muted{color:var(--muted)}
.partner-modal-body p{color:#334155;line-height:1.45;margin:6px 0}

/* responsive breakpoints: desktop show 3 per row, mobile 1 per row */
@media(min-width: 881px){
  .slides .partner-card{ width: calc((100% - var(--gap)*2)/3); } /* 3 per row (desktop) */
}
@media(max-width:880px){
  .slides .partner-card{ width: calc(100%); } /* 1 per row for mobile/tablet per your request */
}

/* hide scrollbars and prevent side peek */
.slides-viewport { -webkit-overflow-scrolling: touch; position: relative; }
</style>

<script>
  (function () {
    /* ---------- DATA: change images & sites as needed ---------- */
    const partners = [
      { id:'sef', name:'Somali Eye Foundation', short:'National NGO delivering community screening campaigns and spectacles distribution.', long:'Somali Eye Foundation runs community screening programs, trains primary eye-care workers, and operates low-cost spectacles workshops in multiple regions.', categories:['ngos','implementation'], image:'images/image1.png', website:'https://somalieyefoundation.example', contact:'info@sef.org' },
      { id:'horizon', name:'Horizon Aid', short:'International donor funding cataract camps and equipment procurement.', long:'Horizon Aid funds health outreach and emergency support in East Africa.', categories:['donors','foundations'], image:'images/image2.png', website:'https://horizonaid.example', contact:'grants@horizonaid.org' },
      { id:'moh', name:'Ministry of Health — Somalia', short:'Policy partner supporting integration of eye care into national health plans.', long:'Ministry of Health collaborates on policy, workforce planning and coordination of regional referral networks.', categories:['government'], image:'images/image3.png', website:'https://moh.so', contact:'info@moh.so' },
      { id:'mmu', name:'Mogadishu Medical University', short:'Academic partner providing clinical training, research and CPD for eye health workers.', long:'MMU partners on clinical curricula, practical training placements and operational research.', categories:['universities','technical'], image:'images/image4.png', website:'https://mmu.example', contact:'ophthal@mmu.edu' },
      { id:'banadir', name:'Banadir Eye Hospital', short:'Regional surgical hub delivering cataract surgery and outreaches.', long:'Banadir Eye Hospital is a surgical centre providing high-volume cataract surgery and mentoring visiting teams.', categories:['hospitals','implementation'], image:'images/image5.png', website:'https://banadirhospital.example', contact:'surgery@banadirhospital.so' },
      { id:'visiontech', name:'VisionTech Ltd', short:'Private supplier of diagnostic equipment and low-cost spectacles solutions.', long:'VisionTech supplies diagnostic equipment and supports local optical workshops with maintenance and training.', categories:['companies','supporting'], image:'images/image6.png', website:'https://visiontech.example', contact:'sales@visiontech.com' },
      { id:'bright', name:'BrightFuture Foundation', short:'Foundation supporting capacity building and small grants for local clinics.', long:'BrightFuture provides small grants and targeted funding for clinic refurbishment and training bursaries.', categories:['foundations','donors'], image:'images/image7.png', website:'https://brightfuture.example', contact:'grants@brightfuture.org' },
      { id:'regional', name:'Regional Health Consortium', short:'Cross-sector consortium coordinating regional service delivery and referral networks.', long:'Regional consortium of local government, NGOs and hospitals working on referrals, supply logistics and data-sharing.', categories:['government','ngos','hospitals'], image:'images/image8.png', website:'', contact:'' }
    ];
  
    /* ---------- DOM refs ---------- */
    const topSlides = document.getElementById('topSlides');
    const bottomSlides = document.getElementById('bottomSlides');
    const topViewport = document.getElementById('topViewport');
    const bottomViewport = document.getElementById('bottomViewport');
    const filterPills = Array.from(document.querySelectorAll('.partner-filter .pill'));
    const modalBackdrop = document.getElementById('partnerModal');
    const modalBody = document.getElementById('partnerModalBody');
    const modalClose = document.getElementById('partnerModalClose');
  
    /* ---------- state ---------- */
    let filtered = partners.slice();
    let perView = window.innerWidth <= 880 ? 1 : 3;
    const GAP = 14;
  
    // carousel structures for top & bottom — note each row has its own intervalMs
    const carousels = {
      top:    { container: topSlides,    viewport: topViewport,    direction: +1, timer: null, index: 0, items: [], intervalMs: 2000 },  // 2s
      bottom: { container: bottomSlides, viewport: bottomViewport, direction: -1, timer: null, index: 0, items: [], intervalMs: 23000 } // 23s
    };
  
    /* ---------- helpers ---------- */
    function esc(s){ if(!s && s!==0) return ''; return String(s).replace(/[&<>"]/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[m])); }
    function cap(s){ if(!s) return ''; return s.charAt(0).toUpperCase() + s.slice(1); }
  
    function makeCardHTML(p){
      return `
        <div class="partner-card" data-id="${esc(p.id)}">
          <div class="partner-media"><img src="${esc(p.image)}" alt="${esc(p.name)} logo" loading="lazy" onerror="this.style.opacity=.12; this.src='images/placeholder.png'"></div>
          <div class="partner-info">
            <div class="partner-name">${esc(p.name)}</div>
            <p class="partner-desc">${esc(p.short)}</p>
            <div class="partner-meta">
              <div class="partner-badge-small">${cap(p.categories[0]||'')}</div>
              <div style="margin-left:auto;display:flex;gap:8px;align-items:center">
                <button class="btn-more" data-id="${esc(p.id)}" aria-controls="partnerModal">More</button>
              </div>
            </div>
          </div>
        </div>
      `;
    }
  
    function buildCarousel(car, items) {
      car.items = items.slice();
      const per = perView || 1;
      const container = car.container;
      container.innerHTML = '';
  
      const prefix = items.slice(-per);
      const suffix = items.slice(0, per);
      const all = prefix.concat(items, suffix);
      all.forEach(p => container.insertAdjacentHTML('beforeend', makeCardHTML(p)));
  
      car.index = per;
      attachCardHandlers(container);
  
      container.addEventListener('transitionend', () => {
        const n = items.length;
        if (car.index >= n + per) {
          car.index = per;
          snapWithoutTransition(() => setTranslateFor(car));
        } else if (car.index < per) {
          car.index = n + per - 1;
          snapWithoutTransition(() => setTranslateFor(car));
        }
      }, { passive: true });
    }
  
    function setTranslateFor(car) {
      const firstCard = car.container.querySelector('.partner-card');
      if (!firstCard) return;
      const cardW = firstCard.getBoundingClientRect().width;
      const step = cardW + GAP;
      car.container.style.transform = `translateX(${ - car.index * step }px)`;
    }
  
    function snapWithoutTransition(fn) {
      [carousels.top.container, carousels.bottom.container].forEach(c => c.style.transition = 'none');
      requestAnimationFrame(() => requestAnimationFrame(() => {
        fn();
        [carousels.top.container, carousels.bottom.container].forEach(c => c.style.transition = '');
      }));
    }
  
    function attachCardHandlers(container) {
      container.querySelectorAll('.btn-more').forEach(btn => {
        btn.onclick = (e) => {
          e.stopPropagation();
          const id = btn.dataset.id;
          const p = partners.find(x => x.id === id);
          if (p) openModal(p);
        };
      });
      container.querySelectorAll('.partner-media img').forEach(img => {
        img.onclick = (e) => {
          const card = e.target.closest('.partner-card');
          const id = card && card.dataset.id;
          const p = partners.find(x => x.id === id);
          if (p && p.website) window.open(p.website, '_blank');
        };
      });
    }
  
    function step(car, dir) {
      if (!car.container.firstElementChild) return;
      car.index += dir;
      car.container.style.transition = '';
      setTranslateFor(car);
    }
  
    // autoplay: uses car.intervalMs now (individual per row)
    function startAutoFor(car) {
      stopAutoFor(car);
      car.timer = setInterval(() => {
        step(car, car.direction);
      }, car.intervalMs);
    }
    function stopAutoFor(car) {
      if (car.timer) { clearInterval(car.timer); car.timer = null; }
    }
    function restartAllAuto() {
      stopAllAuto();
      startAutoFor(carousels.top);
      startAutoFor(carousels.bottom);
    }
    function stopAllAuto() { stopAutoFor(carousels.top); stopAutoFor(carousels.bottom); }
  
    function wireButtons() {
      document.getElementById('topPrev').onclick = () => { step(carousels.top, -1); restartAllAuto(); };
      document.getElementById('topNext').onclick = () => { step(carousels.top, +1); restartAllAuto(); };
      document.getElementById('bottomPrev').onclick = () => { step(carousels.bottom, -1); restartAllAuto(); };
      document.getElementById('bottomNext').onclick = () => { step(carousels.bottom, +1); restartAllAuto(); };
  
      [topViewport, bottomViewport].forEach(vp => {
        vp.addEventListener('mouseenter', () => stopAllAuto());
        vp.addEventListener('mouseleave', () => restartAllAuto());
        vp.addEventListener('focusin', () => stopAllAuto());
        vp.addEventListener('focusout', () => restartAllAuto());
      });
    }
  
    function addSwipe(viewport, car) {
      let startX = 0, curX = 0, dragging = false, pid = null;
      viewport.addEventListener('pointerdown', e => {
        if (e.target.closest('.btn-more, button, a, .partner-media img')) return;
        dragging = true; startX = e.clientX; pid = e.pointerId;
        viewport.setPointerCapture(pid);
        car.container.style.transition = 'none';
      }, { passive: true });
  
      viewport.addEventListener('pointermove', e => {
        if (!dragging) return;
        curX = e.clientX;
        const diff = curX - startX;
        const firstCard = car.container.querySelector('.partner-card');
        if (!firstCard) return;
        const step = firstCard.getBoundingClientRect().width + GAP;
        car.container.style.transform = `translateX(${ - car.index * step + diff }px)`;
      }, { passive: true });
  
      viewport.addEventListener('pointerup', e => {
        if (!dragging) return;
        dragging = false;
        car.container.style.transition = '';
        const diff = curX - startX; const threshold = 50;
        if (diff < -threshold) step(car, +1);
        else if (diff > threshold) step(car, -1);
        else setTranslateFor(car);
        try { viewport.releasePointerCapture(pid); } catch (err) { }
      }, { passive: true });
  
      viewport.addEventListener('pointercancel', () => { dragging = false; setTranslateFor(car); });
    }
  
    function splitForRows(items) {
      const top = [], bottom = [];
      items.forEach((p, i) => { if (i % 2 === 0) top.push(p); else bottom.push(p); });
      if (!top.length && bottom.length) top.push(...bottom.slice(0,1));
      if (!bottom.length && top.length) bottom.push(...top.slice(0,1));
      return { top, bottom };
    }
  
    function renderBoth() {
      topViewport.parentElement.style.display = '';
      bottomViewport.parentElement.style.display = '';
      topViewport.setAttribute('aria-hidden','false');
      bottomViewport.setAttribute('aria-hidden','false');
  
      const { top, bottom } = splitForRows(filtered);
      buildCarousel(carousels.top, top);
      buildCarousel(carousels.bottom, bottom);
  
      requestAnimationFrame(() => {
        setTranslateFor(carousels.top);
        setTranslateFor(carousels.bottom);
      });
  
      addSwipe(topViewport, carousels.top);
      addSwipe(bottomViewport, carousels.bottom);
      wireButtons();
      restartAllAuto();
    }
  
    function renderTopOnly(items) {
      topViewport.parentElement.style.display = '';
      bottomViewport.parentElement.style.display = 'none';
      topViewport.setAttribute('aria-hidden','false');
  
      buildCarousel(carousels.top, items);
      requestAnimationFrame(() => setTranslateFor(carousels.top));
      addSwipe(topViewport, carousels.top);
      wireButtons();
      stopAllAuto();
      startAutoFor(carousels.top); // only top runs
    }
  
    function openModal(p) {
      modalBody.innerHTML = `
        <img src="${esc(p.image)}" alt="${esc(p.name)} logo" onerror="this.style.opacity=.12; this.src='images/placeholder.png'">
        <h3>${esc(p.name)}</h3>
        <div class="muted small">${p.categories.map(c => cap(c)).join(' • ')}</div>
        <p class="muted" style="margin-top:8px">${esc(p.short)}</p>
        <p style="margin-top:8px">${esc(p.long)}</p>
        ${p.website ? `<p style="margin-top:8px"><a href="${esc(p.website)}" target="_blank" rel="noopener">Visit website</a></p>` : ''}
        ${p.contact ? `<p class="muted small">Contact: ${esc(p.contact)}</p>` : ''}
      `;
      modalBackdrop.classList.add('open');
      modalBackdrop.setAttribute('aria-hidden','false');
      modalClose.focus();
      document.addEventListener('focus', trapFocus, true);
      stopAllAuto();
    }
    function closeModal() {
      modalBackdrop.classList.remove('open');
      modalBackdrop.setAttribute('aria-hidden','true');
      modalBody.innerHTML = '';
      document.removeEventListener('focus', trapFocus, true);
      restartAllAuto();
    }
    function trapFocus(e) {
      if (!modalBackdrop.classList.contains('open')) return;
      if (!modalBackdrop.contains(e.target)) { e.stopPropagation(); modalClose.focus(); }
    }
    modalClose.addEventListener('click', closeModal);
    modalBackdrop.addEventListener('click', (e) => { if (e.target === modalBackdrop) closeModal(); });
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeModal(); });
  
    function filterBy(category) {
      if (category === 'all') {
        filtered = partners.slice();
        renderBoth();
        return;
      }
      const matched = partners.filter(p => p.categories.includes(category));
      filtered = matched.slice();
      renderTopOnly(matched);
    }
  
    filterPills.forEach(p => {
      p.addEventListener('click', () => {
        filterPills.forEach(x => x.classList.toggle('active', x === p));
        filterBy(p.dataset.filter);
      });
      p.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); p.click(); } });
    });
  
    let resizeTimeout = null;
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(() => {
        const oldPer = perView;
        const newPer = window.innerWidth <= 880 ? 1 : 3;
        if (oldPer !== newPer) {
          perView = newPer;
          const active = document.querySelector('.partner-filter .pill.active');
          const cat = active ? active.dataset.filter : 'all';
          if (cat === 'all') renderBoth(); else filterBy(cat);
        } else {
          [carousels.top, carousels.bottom].forEach(car => setTranslateFor(car));
        }
      }, 120);
    });
  
    /* ---------- init ---------- */
    filtered = partners.slice();
    renderBoth();
  
  })();
  </script>
  

  <!-- FOOTER -->
  <footer class="site-footer" role="contentinfo">
    <div class="container footer-inner">
      <div class="footer-col">
        <img src="images/logo.png" alt="SEHA logo" class="footer-logo">
        <p class="muted">© 2026 Somali Eye Health Alliance — All Rights Reserved <a href="developers-contact.html">Developers</a></p>
      </div>

      <div class="footer-col">
        <h4>Quick links</h4>
        <ul class="small-list footer-links">
          <li><a href="index.html">Home</a></li>
          <li><a href="about.html">About Us</a></li>
          <li><a href="programs.html">Programs</a></li>
          <li><a href="resources.html">Resources</a></li>
          <li><a href="membership.html">Membership</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </div>

      <div class="footer-col">
        <h4>Contact</h4>
        <address class="muted">
          Mogadishu, Somalia<br>
          info@Somalieyehealthalliance.org <br>
          +252 61 7000264
                </address>
      </div>
    </div>
  </footer>

  <!-- page-specific JS (paste before closing body) -->
<script src="script.js"></script>
  </body>
</html>

